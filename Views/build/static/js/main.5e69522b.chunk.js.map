{"version":3,"sources":["components/reduser/userAction.js","components/alerts.js","components/Header.js","components/Error.js","components/Me.js","components/Login.js","components/reduser/toureducer.js","components/Tours.js","components/Map.js","components/Tour.js","components/Booking.js","components/Books.js","App.js","components/reduser/store.js","index.js"],"names":["GET_USER","GET_USER_SUCCESSFUL","GET_USER_FAILED","initialState","loading","isLoggedIn","data","error","cookie","document","callTheUser","dispatch","type","axios","get","then","response","user","payload","GetUserSuccessful","catch","err","msg","defaults","headers","common","localStorage","getItem","hideAlert","el","querySelector","parentElement","removeChild","showAlert","markup","insertAdjacentHTML","window","setTimeout","connect","state","callUser","useEffect","logout","a","removeItem","location","className","to","href","placeholder","src","alt","onClick","photo","name","split","Error","value","useState","email","Obj","setObj","form","FormData","userPhoto","useRef","currentpassword","password","passwordConfirm","pass","setPass","handleChange","e","target","current","files","send","preventDefault","url","method","status","role","htmlFor","onChange","required","id","accept","ref","action","minLength","setData","handleClick","res","setItem","token","props","pathname","console","log","GET_TOUR","GET_TOUR_SUCCESSFUL","GET_TOUR_FAILED","callTheTour","Tour","tours","GetTourSuccessful","tour","call","map","imageCover","difficulty","duration","summary","startLocation","description","Date","startDates","toLocaleString","month","year","locations","length","maxGroupSize","price","ratingAverage","ratingsQuantity","Map","mapId","mapboxgl","accessToken","container","style","scrollZoom","bounds","LngLatBounds","forEach","loc","createElement","Marker","element","anchor","setLngLat","coordinates","addTo","extend","Popup","offset","setHTML","day","fitBounds","padding","top","left","bottom","right","React","memo","setLoading","tourName","useParams","getTour","useCallback","fetch","json","guides","guide","images","image","reviews","rev","review","star","rating","clasName","Bookings","tourId","booking","stripe","Stripe","withCredentials","session","redirectToCheckout","sessionId","Books","tourss","setTourss","bookings","exact","path","Booking","rootReducers","combineReducers","store","createStore","applyMiddleware","thunk","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.5e69522b.chunk.js","sourcesContent":["import axios from \"axios\"\r\n// import redux from \"redux\"\r\n// import {createStore} from \"redux\"\r\n// import { applyMiddleware } from \"redux\"\r\n// import {thunkMiddleWare} from \"redux-thunk\"\r\n\r\n\r\nconst GET_USER = \"GET_USER\"\r\nconst GET_USER_SUCCESSFUL = \"GET_USER_SUCCESSFUL\"\r\nconst GET_USER_FAILED = \"GET_USER_FAILED\"\r\n//initial state\r\nconst initialState={\r\n    \r\n        loading:true,\r\n        isLoggedIn:false,\r\n        data:{},\r\n        error:'',\r\n        cookie:document.cookie\r\n    \r\n}\r\n\r\n//Creating Action\r\n\r\nfunction GetUser(){\r\n    return {\r\n        type:GET_USER,\r\n    }\r\n\r\n}\r\n\r\nfunction GetUserSuccessful(user){\r\n    return {\r\n        type:GET_USER_SUCCESSFUL,\r\n        payload:user\r\n    }\r\n}\r\n\r\nfunction GetUserFailed(msg){\r\n    return{\r\n        type:GET_USER_FAILED,\r\n        payload:msg\r\n    }\r\n}\r\n\r\n\r\n//Creating Reducer\r\n\r\nexport function useReducer(state = initialState,action){\r\n    switch(action.type){\r\n        case GET_USER :\r\n           return {\r\n               ...state,\r\n               loading:true\r\n           }\r\n        case GET_USER_SUCCESSFUL : return {\r\n            ...state,\r\n            loading:false,\r\n            isLoggedIn:true,\r\n            data:action.payload\r\n        }\r\n        \r\n        case GET_USER_FAILED : return {\r\n            ...state,\r\n            loading:false,\r\n            data:[],\r\n            error:action.payload\r\n        }\r\n        default: return state\r\n    }\r\n}\r\n\r\naxios.defaults.headers.common['authorization'] = `Bearer ${localStorage.getItem('jwt')}`\r\n\r\naxios.defaults.headers.common['Access-Control-Allow-Origin'] = '*'\r\n\r\nexport function callTheUser(){\r\n       \r\n   return function(dispatch){\r\n       \r\n       dispatch(GetUser())\r\n       axios.get(`https://infinite-spire-90765.herokuapp.com/user/me`)\r\n       .then(response=>{\r\n          \r\n           const user = response.data\r\n         \r\n           dispatch(GetUserSuccessful(user))\r\n           \r\n       }).catch(err=>{\r\n           dispatch(GetUserFailed(err.msg))\r\n       })\r\n   }\r\n}\r\n\r\n\r\n","\r\n\r\nexport const hideAlert=()=>{\r\n    const el = document.querySelector('.alert')\r\n    if(el) el.parentElement.removeChild(el)\r\n}\r\n\r\n\r\nexport const showAlert=(type,msg)=>{\r\n    hideAlert()\r\n    const markup =  `<div class=\"alert alert--${type}\">${msg}</div>`\r\n    document.querySelector(\"body\").insertAdjacentHTML('afterbegin',markup)\r\n    window.setTimeout(hideAlert,5000)\r\n  \r\n}","import { React, useEffect } from 'react';\r\n// import './../App.css'\r\nimport { Link } from 'react-router-dom';\r\nimport {connect} from \"react-redux\"\r\nimport { callTheUser } from './reduser/userAction';\r\n// import { useGlobal } from './useGlobal';\r\nimport { showAlert } from './alerts';\r\n// import axios from 'axios';\r\n// import jwtDecode from 'jwt-decode'\r\n\r\nconst Header = ({user,callUser}) => {\r\n    useEffect(()=>{ \r\n     callUser()\r\n     \r\n   \r\n          \r\n    },[callUser])\r\n   \r\nconst logout = async ()=>{\r\n  // try {\r\n  //  await axios({  \r\n  //     method:'get',\r\n  //     url :'http://127.0.0.1:8080/user/logout',\r\n\r\n  //   })\r\n  //   window.location = '/'\r\n  // } catch (error) {\r\n  //   showAlert(\"error\",\"Error loggin out\")\r\n  \r\n    \r\n  // }\r\n  localStorage.removeItem('jwt')\r\n  showAlert('success',\"Logged Out\")\r\n  window.location = \"/\"\r\n}\r\n\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <nav className=\"nav nav--tours\">\r\n        <Link to=\"/\" className=\"nav__el\">\r\n          All Tours\r\n        </Link>\r\n        <form className=\"nav__search\">\r\n          <button className=\"nav__search-btn\">\r\n            <svg>\r\n              <use href=\"./../img/icons.svg#icon-search\"></use>\r\n            </svg>\r\n          </button>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search tours\"\r\n            className=\"nav__search-input\"\r\n          />\r\n        </form>\r\n      </nav>\r\n      <div className=\"header__logo\">\r\n        <img src=\"./../img/logo-white.png\" alt=\"Natours logo\" />\r\n      </div>\r\n      {user.isLoggedIn ? (\r\n        <nav className=\"nav nav--user\">\r\n          <Link className=\"nav__el nav__el--logout\" to=\"\" onClick={()=>logout()}>\r\n            Log out\r\n          </Link>\r\n          <Link to=\"/Me\" className=\"nav__el\">\r\n            <img\r\n              className=\"nav__user-img\"\r\n              src={`/img/users/${user?.data?.data?.user?.photo}`}\r\n              alt=\"user\"\r\n            />\r\n            <span>{user?.data?.data?.user?.name.split(' ')[0]}</span>\r\n          </Link> \r\n        </nav>\r\n      ) : ( \r\n        <nav className=\"nav nav--user\">\r\n          <Link className=\"nav__el\" to=\"/login\">\r\n            Log in\r\n          </Link>\r\n          <Link to=\"/singup\" className=\"nav__el nav__el--cta \">\r\n            Sign up\r\n          </Link>\r\n        </nav>\r\n      )}\r\n    </header>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) =>{\r\n \r\n//  console.log(state.user)\r\n      return {\r\n          user:state.user\r\n      }\r\n}\r\nconst mapDispatchToProps = (dispatch) =>{\r\n      return {\r\n          callUser:()=>dispatch(callTheUser())\r\n      }\r\n} \r\n\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)( Header);\r\n","\r\n\r\nconst Error = ({value}) => {\r\n    return ( <>\r\n    <main className=\"main\">\r\n        <div className=\"error\">\r\n            <div className=\"error__title\">\r\n                <h2 className=\"heading-secondary heading-secondary--error\">\r\n                    Something went Wrong\r\n\r\n                </h2>\r\n            </div>\r\n            <div className=\"error__msg\">{value}</div>\r\n        </div>\r\n    </main>\r\n     \r\n    </> );\r\n}\r\n \r\nexport default Error;","// import React, {useRef} from \"react\";\r\n// import { useGlobal } from './useGlobal';\r\nimport Error from \"./Error\";\r\nimport axios from \"axios\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { showAlert } from \"./alerts\";\r\n// import redux from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { callTheUser } from \"./reduser/userAction\";\r\nimport { Link } from \"react-router-dom\";\r\nconst Me = ({ user, callUser }) => {\r\n  const [Obj, setObj] = useState({ name: \"\", email: \"\", photo: \"\" });\r\n  useEffect(() => {\r\n    callUser();\r\n  }, [callUser]);\r\n  \r\n  let form = new FormData()\r\n  let userPhoto = useRef('')\r\n \r\n \r\n\r\n  //  let name = user?.data?.data?.user.name\r\n\r\n  //  let email = user?.data?.data?.user.email\r\n  //  let photo = user?.data?.data?.user.photo\r\n\r\n \r\n\r\n  \r\n  const [pass, setPass] = useState({ \r\n    currentpassword: \"\",\r\n    password: \"\",\r\n    passwordConfirm: \"\",\r\n  });  \r\n  const handleChange = (e, type) => {\r\n    let name = e.target.name;\r\n    let value = e.target.value;\r\n    \r\n    \r\n    if (type === \"password\") { \r\n      setPass({ ...pass, [name]: value });\r\n    } else {\r\n      if(name===\"photo\") value= userPhoto.current.files[0]\r\n      setObj({ ...Obj, [name]: value });\r\n     \r\n\r\n    }\r\n  };           \r\n   \r\n    \r\n  const send = async (e, data, type) => {\r\n    // form.append('photo',Obj.photo) \r\n    // form.append('email',Obj.email)\r\n    // form.append('name',Obj.name) \r\n    form.photo = Obj.photo\r\n    form.email = Obj.email\r\n    form.name = Obj.name\r\n   \r\n    e.preventDefault();\r\n    let url =\r\n      type === \"password\"\r\n        ? \"https://infinite-spire-90765.herokuapp.com/user/updatepassword\"\r\n        : \"https://infinite-spire-90765.herokuapp.com/user/updateme\";\r\n         \r\n    try {\r\n      const res = await axios({\r\n        method:'patch' ,    \r\n        url: url,\r\n        data:type==='password'? {currentpassword:pass.currentpassword,password:pass.password,passwordConfirm:pass.passwordConfirm} : {name:form.name,email:form.email,photo:form.photo}\r\n      });\r\n      \r\n      if (res.status === \"success\") {\r\n        showAlert(\"success\", \"updated successfully\");\r\n        window.location = \"/me\";\r\n      }\r\n    } catch (err) {\r\n      \r\n      return <Error value=\"Please try agian later\" />;\r\n    }\r\n  };\r\n\r\n  if (user.isLoggedIn) {\r\n    return (\r\n      <>\r\n        <main className=\"main\">\r\n          <div className=\"user-view\">\r\n            <nav className=\"user-view__menu\">\r\n              <ul className=\"side-nav\">\r\n                <li className=\"side-nav--active\">\r\n                  <a href=\"/img/icons.svg#icon-settings\">\r\n                    <svg href=\"/img/icons.svg#icon-settings\"></svg>| Settings\r\n                  </a>\r\n                </li>\r\n                <li className=\"side-nav--active\">\r\n                  <Link to=\"/bookings\">\r\n                    svg use(xlink:href='img/icons.svg#icon-briefcase') | My\r\n                    Bookings\r\n                  </Link>\r\n                </li>\r\n                <li className=\"side-nav--active\">\r\n                  <a href=\"/\">\r\n                    svg use(xlink:href='img/icons.svg#icon-star') | My Reviews\r\n                  </a>\r\n                </li>\r\n                <li className=\"side-nav--active\">\r\n                  <a href=\"/\">\r\n                    svg use(xlink:href='/img/icons.svg#icon-credit-card') |\r\n                    Billing\r\n                  </a>\r\n                </li>\r\n              </ul>\r\n              {/* Admin page */}\r\n              {`${user?.data?.data?.user?.role}` === \"admin\" ? (\r\n                <div className=\"admin-nav\">\r\n                  <h5 className=\"admin-nav__heading\">Admin</h5>\r\n                  <ul className=\"side-nav\">\r\n                    <li>\r\n                      <a href=\"/\">\r\n                        svg use(xlink:href='img/icons.svg#icon-map') | Manage\r\n                        tours\r\n                      </a>\r\n                    </li>\r\n                    <li>\r\n                      <a href=\"/\">\r\n                        svg use(xlink:href='img/icons.svg#icon-users') | Manage\r\n                        Users\r\n                      </a>\r\n                    </li>\r\n                    <li>\r\n                      <a href=\"/\">\r\n                        svg use(xlink:href='img/icons.svg#icon-star') | Manage\r\n                        Reviews\r\n                      </a>\r\n                    </li>\r\n                    <li>\r\n                      <a href=\"/\">\r\n                        svg use(xlink:href='img/icons.svg#icon-briefcase') |\r\n                        Manage Tours\r\n                      </a>\r\n                    </li>\r\n                  </ul>\r\n                </div> \r\n              ) : null}\r\n            </nav>\r\n            <div className=\"user-view__content\">\r\n              <div className=\"user-view__form-container\">\r\n                <h2 className=\"heading-secondary ma-bt-md\">\r\n                  Your Accoount Settings {`Mr.${user?.data?.data?.user?.name.split(' ')}`}\r\n                </h2>\r\n                <form className=\"form form-user-data\">\r\n                  <div className=\"form__group\">\r\n                    <label htmlFor=\"name\" className=\"form__label\">\r\n                      Name\r\n                    </label>\r\n                    <input\r\n                      value={Obj.name}\r\n                      onChange={(e) => handleChange(e)}\r\n                      className=\"form__input\"\r\n                      required\r\n                      type=\"text\"\r\n                      id=\"name\"\r\n                      name=\"name\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"form__group ma-bt-md\">\r\n                    <label htmlFor=\"email\" className=\"form__label\">\r\n                      Email\r\n                    </label>\r\n                    <input\r\n                      className=\"form__input\"\r\n                      value={Obj.email}\r\n                      onChange={(e) => handleChange(e)}\r\n                      name=\"email\"\r\n                      id=\"email\"\r\n                      type=\"email\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div className=\"form__group form__photo-upload\">\r\n                    <img\r\n                      className=\"form__user-photo\"\r\n                      src={`/img/users/${user?.data?.data?.user?.photo}`}\r\n                      alt=\"user\"\r\n                    />\r\n                    <input\r\n                      onChange={(e) => handleChange(e)}\r\n                      type=\"file\"\r\n                      name=\"photo\"\r\n                      id=\"photo\"\r\n                      accept=\"image/*\"\r\n                      className=\"form__upload\"\r\n                      ref={userPhoto}\r\n                    />\r\n                    <label onChange={(e) => handleChange(e)} htmlFor=\"photo\">\r\n                      Choose Photo\r\n                    </label>\r\n                  </div>\r\n                  <div className=\"form__group right\">\r\n                    <button\r\n                      className=\"btn btn--small btn--green\"\r\n                      onClick={(e) =>\r\n                        send(\r\n                          e,\r\n                         form,\r\n                          \"user\"\r\n                        )\r\n                      }\r\n                    >\r\n                      Save settings\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n                <div className=\"line\"></div>\r\n                <div className=\"user-view__form-container\">\r\n                  <h2 className=\"heading-secondary ma-bt-md\">\r\n                    password Change\r\n                  </h2>\r\n                  <form action=\"/\" className=\"form form-user-settings\">\r\n                    <div className=\"form__group\">\r\n                      <label htmlFor=\"password\" className=\"form__label\">\r\n                        Current Password\r\n                      </label>\r\n                      <input\r\n                        onChange={(e) => handleChange(e, \"password\")}\r\n                        className=\"form__input\"\r\n                        id=\"password-current\"\r\n                        type=\"password\"\r\n                        required\r\n                        minLength=\"8\"\r\n                        name=\"currentpassword\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"form__group\">\r\n                      <label\r\n                        htmlFor=\"password\"\r\n                        id=\"password\"\r\n                        className=\"form__label\"\r\n                      >\r\n                        New Password\r\n                      </label>\r\n                      <input\r\n                        onChange={(e) => handleChange(e, \"password\")}\r\n                        className=\"form__input\"\r\n                        id=\"password\"\r\n                        type=\"password\"\r\n                        required\r\n                        minLength=\"8\"\r\n                        name=\"password\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"form__group ma-bt-lg\">\r\n                      <label htmlFor=\"password-confirm\" className=\"form__label\">\r\n                        Confirm Password\r\n                      </label>\r\n                      <input\r\n                        onChange={(e) => handleChange(e, \"password\")}\r\n                        type=\"password\"\r\n                        id=\"password-confirm\"\r\n                        className=\"form__input\"\r\n                        minLength=\"8\"\r\n                        required\r\n                        name=\"passwordConfirm\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"form__group right\">\r\n                      <button\r\n                        className=\"btn btn--small btn--green\"\r\n                        onClick={(e) =>\r\n                          send(\r\n                            e,\r\n                            {\r\n                              password: pass.password,\r\n                              currentpassword: pass.currentpassword,\r\n                              passwordConfirm: pass.passwordConfirm,\r\n                            },\r\n                            \"password\"\r\n                          )\r\n                        }\r\n                      >\r\n                        Save Password\r\n                      </button>\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </main>\r\n      </>\r\n    );\r\n  } else {\r\n    return \"Loading...\";\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  \r\n  return {\r\n    user: state.user,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    callUser: () => dispatch(callTheUser()),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Me);\r\n","import { React,  useState } from 'react';\r\nimport {connect} from \"react-redux\"\r\nimport axios from 'axios';    \r\n   \r\n// import { useGlobal } from './useGlobal';\r\n\r\n// import { useHistory } from 'react-router-dom';\r\nimport { showAlert } from './alerts';\r\n// import { showAlert } from './alerts';\r\nconst Login = ({user}) => {\r\n  // const history = useHistory()\r\n  \r\n    const [data,setData] = useState({email:\"\",password:\"\"})\r\n  \r\n\r\n const handleChange=(e)=>{\r\n     let name = e.target.id\r\n     let value = e.target.value\r\n     \r\n     setData({...data,[name]:value})\r\n     \r\n }\r\n const handleClick=async (e)=>{\r\n     e.preventDefault()\r\n    //  console.log('clicking')\r\n     try{\r\n       const res= await axios({\r\n        method:'post',\r\n        url:\"https://infinite-spire-90765.herokuapp.com/user/login/\",\r\n        data:{\r\n          email:data.email,\r\n          password:data.password\r\n      }        \r\n        })\r\n      localStorage.setItem('jwt',res.data.token)\r\n      if(res.status===200){\r\n        showAlert('success',\"Logged In\")\r\n         user.isLoggedIn=true\r\n        \r\n          if(user.props){\r\n           window.location = user.props.location.pathname\r\n           }else window.location = '/'\r\n\r\n      }\r\n    }catch(err){\r\n         console.log(err)\r\n    }\r\n     \r\n\r\n }\r\n  \r\n  return (\r\n    <>\r\n      <main className=\"main\">\r\n        <div className=\"login-form\">      \r\n          <h2  className=\"heading-secondary ma-bt-lg\">Login to your Account</h2> \r\n\r\n          <form className=\"form--login\" >\r\n            <div className=\"form__group\">\r\n              <label className=\"form__label\" htmlFor=\"email\">\r\n                Email Address\r\n              </label>\r\n              <input\r\n                onChange={(e)=>handleChange(e)}\r\n                id=\"email\"\r\n                className=\"form__input\"\r\n                type=\"email\"\r\n                placeholder=\"you@gmail.com\"\r\n              />\r\n            </div>\r\n            <div className=\"form__group ma-bt-md\">\r\n              <label className=\"form__label\" htmlFor=\"password\">\r\n                Password\r\n              </label>\r\n              <input\r\n                onChange={(e)=>handleChange(e)}\r\n                id=\"password\"\r\n                className=\"form__input\"\r\n                type=\"password\"\r\n                placeholder=\"your password\"\r\n                minLength=\"8\"\r\n              />\r\n            </div>\r\n            <div className=\"form__group\">\r\n              {/* <Link to=\"#\" className=\"btn btn--green\">Log In</Link> */}\r\n              <button onClick={(e)=>handleClick(e)} className=\"btn btn--green\">\r\n                Log In\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n\r\n\r\n// const mapDispatchToProps=(dispatch)=>{\r\n//     return {\r\n//         call:()=>dispatch(callTheUser())\r\n//     }\r\n\r\n// }\r\n\r\nconst mapStateToProps = (state)=>{\r\n  \r\n    return {\r\n        user:state.user\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport default connect(mapStateToProps,null)(Login);\r\n    // export default Login\r\n                                 ","import axios from \"axios\"\r\n// import redux from \"redux\"\r\n// import {createStore} from \"redux\"\r\n// import { applyMiddleware } from \"redux\"\r\n\r\n\r\n\r\nconst GET_TOUR = \"GET_TOUR\"\r\nconst GET_TOUR_SUCCESSFUL = \"GET_TOUR_SUCCESSFUL\"\r\nconst GET_TOUR_FAILED = \"GET_TOUR_FAILED\"\r\n//initial state\r\nconst initialState = {\r\n    \r\n        loading:true,\r\n        data:[],\r\n        error:''\r\n    \r\n}\r\n\r\n//Creating Action\r\n\r\nfunction GetTour(){\r\n    return {\r\n        type:GET_TOUR,\r\n    }\r\n\r\n}\r\n\r\nfunction GetTourSuccessful(Tour){\r\n    return {\r\n        type:GET_TOUR_SUCCESSFUL,\r\n        payload:Tour\r\n    }\r\n}\r\n\r\nfunction GetTourFailed(msg){\r\n    return{\r\n        type:GET_TOUR_FAILED,\r\n        payload:msg\r\n    }\r\n}\r\n\r\n\r\n//Creating Reducer\r\n\r\nexport const touReducer=(state = initialState,action)=>{\r\n    switch(action.type){\r\n        case GET_TOUR : return{\r\n            ...state,\r\n            loading:true,\r\n        }\r\n        case GET_TOUR_SUCCESSFUL : \r\n           return {...state,\r\n                data:action.payload,\r\n                loading:false\r\n            }\r\n                \r\n            \r\n        case GET_TOUR_FAILED : return {  \r\n            loading:false,\r\n            data:[],\r\n            error:action.payload\r\n        }\r\n        default: return state\r\n    }\r\n}\r\n\r\n\r\nexport const callTheTour=()=> {\r\n   \r\n   return function(dispatch){ \r\n       dispatch(GetTour())\r\n       axios.get(\"https://infinite-spire-90765.herokuapp.com/tour/\")\r\n       .then(response=>{\r\n           const Tour = response.data.data.tours\r\n         \r\n           dispatch(GetTourSuccessful(Tour))\r\n         \r\n           \r\n           \r\n       }).catch(err=>{\r\n           dispatch(GetTourFailed(err.msg))\r\n          \r\n       })\r\n   }\r\n}\r\n\r\n\r\n","import React, { useEffect } from 'react';\r\n// import axios from \"axios\"\r\n// import Tour from \"./Tour\"\r\n// import img from \"./../img/tours/tour-2-cover.jpg\"\r\nimport { callTheTour } from './reduser/toureducer';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Tours = ({call,tour,user}) => {  \r\n  useEffect(() => {\r\n  \r\n   call()\r\n   \r\n  \r\n  }, [call]);\r\n            \r\n  return (\r\n    <main className=\"main\">\r\n      {tour.loading ? (\r\n        'loading'\r\n      ) : (\r\n        <div className=\"card-container\">\r\n          {tour.data?.map((data) => {\r\n            return (\r\n              <div className=\"card\" key={data.id}>\r\n                <div className=\"card__header\">\r\n                  <div className=\"card__picture\">\r\n                    <div className=\"card__picture-overlay\">&nbsp;</div>\r\n                    <img\r\n                      // src={'img/pin.png'}\r\n                      src={`/img/tours/${data.imageCover}`}\r\n                      alt={data.name}\r\n                      className=\"card__picture-img\"\r\n                    />\r\n                  </div>\r\n\r\n                  <h3 className=\"heading-tertirary\">\r\n                    <span>{data.name}</span>\r\n                  </h3>\r\n                </div>\r\n\r\n                <div className=\"card__details\">\r\n                  <h4 className=\"card__sub-heading\">\r\n                    {data.difficulty + ' ' + data.duration + ' day tour'}\r\n                  </h4>\r\n                  <p className=\"card__text\">{data.summary}</p>\r\n                  <div className=\"card__data\">\r\n                    <svg className=\"card__icon\">\r\n                      <use href=\"/img/icons.svg/icon-map-pin\"></use>\r\n                    </svg>\r\n                    <span>{data.startLocation.description}</span>\r\n                  </div>\r\n                  <div className=\"card__data\">\r\n                    <svg className=\"card__icon\">\r\n                      <use href=\"/img/icons.svg/icon-calendar\"></use>\r\n                    </svg>\r\n                    <span>\r\n                      {new Date(data.startDates[0]).toLocaleString('en-us', {\r\n                        month: 'long',\r\n                        year: 'numeric',\r\n                      })}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"card__data\">\r\n                    <svg className=\"card__icon\">\r\n                      <use href=\"/img/icons.svg/icon-flag\"></use>\r\n                    </svg>\r\n                    <span> {data.locations.length + ' stops'}</span>\r\n                  </div>\r\n                  <div className=\"card__data\">\r\n                    <svg className=\"card__icon\">\r\n                      <use href=\"/img/icons.svg/icon-user\"></use>\r\n                    </svg>\r\n                    <span>{data.maxGroupSize + ' people'}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"card__footer\">\r\n                  <p>\r\n                    <span className=\"card__footer-value\">\r\n                      {'$' + data.price}\r\n                    </span>\r\n                    <span className=\"card__footer-text\"> per person</span>\r\n                  </p>\r\n                  <p className=\"card__ratings\">\r\n                    <span className=\"card__footer-value\">\r\n                      {data.ratingAverage}\r\n                    </span>\r\n                    <span className=\"card__footer-text\">\r\n                      {'rating ' + data.ratingsQuantity}\r\n                    </span>\r\n                  </p>\r\n\r\n                  <Link\r\n                    to={`/tour/${data.name}`}\r\n                    className=\"btn btn--green btn--small\"\r\n                  >\r\n                    Details\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n};                \r\n\r\n              \r\n\r\n    \r\n \r\n\r\nconst mapStateToProps = (state) => {\r\n\r\n  return { \r\n    tour : state.tour,\r\n    user: state.user\r\n    } \r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    call : ()=>dispatch(callTheTour())\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Tours);\r\n","import { React, useEffect, useRef } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\n\r\nconst Map = ({ tour }) => {\r\n  const locations = tour.locations;\r\n  const mapId = useRef(null);\r\n\r\n  mapboxgl.accessToken =\r\n    'pk.eyJ1IjoiZnJvbWluZGlhMSIsImEiOiJja29zZHJwZWkwMGl6MnFsc3JtdGg4ZGZkIn0.zHRisllWeuVkVW2y2FCBYQ';\r\n\r\n  useEffect(() => {\r\n    let map = new mapboxgl.Map({\r\n      container: mapId.current,\r\n      style: 'mapbox://styles/fromindia1/ckoso76ho3fdo17kcckcc6r7e',\r\n      scrollZoom: false,\r\n    });\r\n    var bounds = new mapboxgl.LngLatBounds();\r\n\r\n    locations.forEach((loc) => {\r\n      // create a marker\r\n      const el = document.createElement('div');\r\n      el.className = 'marker';\r\n\r\n      new mapboxgl.Marker({\r\n        element: el,\r\n        anchor: 'bottom',\r\n      })\r\n        .setLngLat(loc.coordinates)\r\n        .addTo(map);\r\n\r\n      bounds.extend(loc.coordinates);\r\n      //  create a pop-up\r\n      new mapboxgl.Popup({\r\n        offset: 30,\r\n      })\r\n        .setLngLat(loc.coordinates)\r\n        .setHTML(`<p>Day ${loc.day} ${loc.description}</p>`)\r\n        .addTo(map);\r\n    });\r\n    map.fitBounds(bounds, {\r\n      padding: {\r\n        top: 200,\r\n        left: 150,\r\n        bottom: 150,\r\n        right: 100,\r\n      },\r\n    });\r\n  }, [locations]);\r\n  // var bounds = new mapboxgl.LngLatBounds()\r\n\r\n  // locations.forEach(loc => {\r\n  //   // create a marker\r\n  //    const el = document.createElement(\"div\")\r\n  //    el.className = \"marker\"\r\n\r\n  //    new mapboxgl.Marker({\r\n  //      element:el,\r\n  //      anchor:\"center\"\r\n  //    }).setLngLat(loc.coordinates).addTo( map)\r\n\r\n  // });\r\n\r\n  return (\r\n    <>\r\n      <section className=\"section-map\">\r\n        <div ref={mapId} id=\"map\"></div>\r\n      </section>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Map;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport Map from \"./Map\";\r\nimport { useParams } from \"react-router-dom\";\r\n// import axios from 'axios';\r\nimport Error from \"./Error\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { callTheUser } from \"./reduser/userAction\";\r\n\r\nconst Tour = React.memo(({ user, callUser }) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [data, setData] = useState({});\r\n\r\n  const tourName = useParams();\r\n\r\n\r\n  const url = `https://infinite-spire-90765.herokuapp.com/tour/${tourName.id}`;\r\n  \r\n  const getTour = useCallback(async () => {\r\n    try {\r\n      const data = await fetch(url);\r\n      const res = await data.json();\r\n      \r\n      setData(res);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n\r\n    \r\n    }\r\n  }, [url]);\r\n\r\n  useEffect(() => {\r\n    callUser();\r\n  \r\n    getTour();\r\n  }, [url, getTour, callUser]);\r\n\r\n  let tour = data?.data?.tour;\r\n  \r\n  if (data.status === \"error\") {\r\n    return <Error value=\"There is No Tour with that Name\" />;\r\n  } else {\r\n    return (\r\n      <>\r\n        {loading ? (\r\n          \"loading\"\r\n        ) : (\r\n          <>\r\n            {/* Title Card */}\r\n\r\n            <section className=\"section-header\">\r\n              <div className=\"heading-box\">\r\n                <h1 className=\"heading-primary\">\r\n                  <span>\r\n                    {tour.name}\r\n                    <br />\r\n                    Tour\r\n                  </span>\r\n                </h1>\r\n                {/* Details About Tour  */}\r\n                <div className=\"heading-box__group\">\r\n                  <div className=\"heading-box__detail\">\r\n                    <svg className=\"heading-box__icon\">\r\n                      <use href=\"/img/icons.svg#icon-clock\"></use>\r\n                    </svg>\r\n                    <span className=\"heading-box__text\">\r\n                      {tour.duration} days\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"heading-box__detail\">\r\n                    <svg className=\"heading-box__icon\">\r\n                      <use href=\"/img/icons.svg#icon-map-pin\"></use>\r\n                    </svg>\r\n                    <span className=\"heading-box__text\">\r\n                      {tour.startLocation.description}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </section>\r\n            {/* Tour description */}\r\n            <section className=\"section-description\">\r\n              <div className=\"overview-box\">\r\n                <div>\r\n                  <div className=\"overview-box__group\">\r\n                    <h2 className=\"heading-secondary ma-bt-lg\">Quick facts</h2>\r\n                    <div className=\"overview-box__detail\">\r\n                      <svg className=\"overview-box__icon\">\r\n                        <use href=\"/img/icons.svg#icon-calendar\"></use>\r\n                      </svg>\r\n                      <span className=\"overview-box__label\">Next date</span>\r\n                      <span className=\"overview-box__text\">\r\n                        {tour.startDates[0]}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"overview-box__detail\">\r\n                      <svg className=\"overview-box__icon\">\r\n                        <use href=\"/img/icons.svg#icon-trending-up\"></use>\r\n                      </svg>\r\n                      <span className=\"overview-box__label\">Difficulty</span>\r\n                      <span className=\"overview-box__text\">\r\n                        {tour.difficulty}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"overview-box__detail\">\r\n                      <svg className=\"overview-box__icon\">\r\n                        <use href=\"/img/icons.svg#icon-user\"></use>\r\n                      </svg>\r\n                      <span className=\"overview-box__label\">Participants</span>\r\n                      <span className=\"overview-box__text\">\r\n                        {tour.maxGroupSize} people\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"overview-box__detail\">\r\n                      <svg className=\"overview-box__icon\">\r\n                        <use href=\"/img/icons.svg#icon-star\"></use>\r\n                      </svg>\r\n                      <span className=\"overview-box__label\">Rating</span>\r\n                      <span className=\"overview-box__text\">\r\n                        {tour.ratingAverage} / {tour.ratingsQuantity}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  {/* Tour Guides */}\r\n                  <div className=\"overview-box__group\">\r\n                    <h2 className=\"heading-secondary ma-bt-lg\">\r\n                      Your tour guides\r\n                    </h2>\r\n\r\n                    {tour.guides.map((guide) => {\r\n                      return (\r\n                        <div key={guide.name} className=\"overview-box__detail\">\r\n                          <img\r\n                            src={`/img/users/${guide.photo}`}\r\n                            alt=\"Lead guide\"\r\n                            className=\"overview-box__img\"\r\n                          />\r\n                          <span className=\"overview-box__label\">\r\n                            {guide.role}\r\n                          </span>\r\n                          <span className=\"overview-box__text\">\r\n                            {guide.name}\r\n                          </span>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"description-box\">\r\n                <h2 className=\"heading-secondary ma-bt-lg\">\r\n                  About the {tour.name} Tour\r\n                </h2>\r\n                <p className=\"description__text\">{tour.description}</p>\r\n              </div>\r\n            </section>\r\n\r\n            <section className=\"section-pictures\">\r\n              {tour.images.map((image) => {\r\n                return (\r\n                  <div key={image} className=\"picture-box\">\r\n                    <img\r\n                      className=\"picture-box__img picture-box__img--1\"\r\n                      src={`/img/tours/${image}`}\r\n                      alt=\"The Park Camper Tour 1\"\r\n                    />\r\n                  </div>\r\n                );\r\n              })}\r\n            </section>\r\n            {/* Map  */}\r\n            <Map tour={tour} />\r\n            {/* Review Section */}\r\n            <section className=\"section-reviews\">\r\n              <div className=\"reviews\">\r\n                {tour.reviews.map((rev) => {\r\n                  return (\r\n                    <div key={rev.id} className=\"reviews__card\">\r\n                      <div className=\"reviews__avatar\">\r\n                        <img\r\n                          src={`/img/users/${rev.user.photo}`}\r\n                          alt=\"Jim Brown\"\r\n                          className=\"reviews__avatar-img\"\r\n                        />\r\n                        <h6 className=\"reviews__user\">{rev.user.name}</h6>\r\n                      </div>\r\n                      <p className=\"reviews__text\">{rev.review}</p>\r\n                      <div className=\"reviews__rating\">\r\n                        {[1, 2, 3, 4, 5].map((star) => {\r\n                          return (\r\n                            <svg\r\n                              key={star}\r\n                              className={`reviews__star reviews__star--${\r\n                                rev.rating >= star ? \"active\" : \"inactive\"\r\n                              }`}\r\n                            >\r\n                              <use href=\"/img/icons.svg#icon-star\"></use>\r\n                            </svg>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </section>\r\n\r\n            <section className=\"section-cta\">\r\n              <div className=\"cta\">\r\n                <div className=\"cta__img cta__img--logo\">\r\n                  <img\r\n                    src=\"/img/logo-white.png\"\r\n                    alt=\"Natours logo\"\r\n                    className=\"\"\r\n                  />\r\n                </div>\r\n                <img\r\n                  src={`/img/tours/${tour.images[2]}`}\r\n                  alt=\"\"\r\n                  className=\"cta__img cta__img--1\"\r\n                />\r\n                <img\r\n                  src={`/img/tours/${tour.images[0]}`}\r\n                  alt=\"\"\r\n                  className=\"cta__img cta__img--2\"\r\n                />\r\n\r\n                <div className=\"cta__content\">\r\n                  <h2 className=\"heading-secondary\">\r\n                    What are you waiting for?\r\n                  </h2>\r\n                  <p className=\"cta__text\">\r\n                    {tour.duration} days. 1 adventure. Infinite memories. Make\r\n                    it yours today!\r\n                  </p>\r\n                  {user.isLoggedIn ? (    \r\n                    <Link\r\n                      to={`/booking/${tour.id}`}\r\n                      className=\"btn btn--green span-all-rows\"\r\n                    >\r\n                      Book tour now!\r\n                    </Link>\r\n                  ) : (\r\n                    <Link to=\"/login\" clasName=\"btn btn--green span-all-rows\">\r\n                      Login to Book Tour\r\n                    </Link>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </section>\r\n          </>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n});\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    tour: state.tour,\r\n    user: state.user,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    callUser: () => dispatch(callTheUser()),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Tour);\r\n","import { useEffect } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport axios from  \"axios\"\r\nimport {showAlert} from \"./alerts\"\r\n\r\n// import Stripe from \"stripe\";\r\n// import { Stripe } from \"stripe\";\r\n// axios.defaults.withCredentials= true\r\n// const stripee = require(\"stripe\")\r\n// (\"pk_test_51IwJA8SImVPQaPp7KU8HTgSvoXGZAMvkF02zfkmVRg52y2LSDqmbwrEJplGcrCdyBmOLe0LatV9mPUo2SGrl2D5c00voJ4MnPh\")\r\n\r\n\r\n\r\nconst Bookings = () => {\r\n    const tourId = useParams()\r\n \r\n    const url = `https://infinite-spire-90765.herokuapp.com//booking/checkout-session/${tourId.id}`\r\n    \r\n    useEffect(()=>{\r\n        booking()\r\n    //    const scriptTag = document.createElement('script');\r\n    //    scriptTag.src = \"https://js.stripe.com/v3/\";\r\n    //     scriptTag.async = true;\r\n    //     document.body.appendChild(scriptTag);\r\n            \r\n       \r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[])\r\n    \r\n    const stripe = window.Stripe(\"pk_test_51IwJA8SImVPQaPp7KU8HTgSvoXGZAMvkF02zfkmVRg52y2LSDqmbwrEJplGcrCdyBmOLe0LatV9mPUo2SGrl2D5c00voJ4MnPh\")\r\n    \r\n  \r\n    async function booking(){\r\n        try{\r\n        \r\n        //* Get checkout session\r\n           const session = await axios({\r\n               method:\"get\",\r\n               url:url,\r\n               withCredentials:true\r\n           })\r\n        //* Charge the credit card\r\n             await stripe.redirectToCheckout({\r\n                 sessionId:session.data.session.id\r\n             })\r\n        }\r\n       \r\n                  \r\n        \r\n        catch(err){\r\n            showAlert(\"error\",err)\r\n\r\n        }\r\n       \r\n    }\r\n    \r\n    \r\n    \r\n    \r\n    return (<>\r\n    Payment page is Loading...\r\n    </>  );\r\n}\r\n \r\nexport default Bookings;","import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Tours from \"./Tours\"\r\nconst Books = () => {\r\n    const [tourss,setTourss] = useState([])\r\n  async  function bookings(){\r\n      const tours= await axios({\r\n        method:'get',\r\n        url:'https://infinite-spire-90765.herokuapp.com/webhook-checkout',\r\n        \r\n      })\r\n      setTourss(tours)\r\n     \r\n    }\r\n   \r\n\r\n    useEffect(()=>{\r\n        bookings()\r\n    },[])\r\n    return ( \r\n    <>\r\n     {tourss.length===0? <h1>No tours</h1>:<>\r\n      {tourss.map(el=>{\r\n         return <Tours/>\r\n      })}  </>}\r\n    </> \r\n    );\r\n}\r\n \r\nexport default Books;","import React,{useEffect} from 'react';\nimport Header from './components/Header';\n// import Footer from './components/Footer';\n// import Tours from './components/Tours';\nimport Me from \"./components/Me\"\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './App.css';\nimport { Switch, Route } from 'react-router-dom';\nimport Login from './components/Login';\n// import ProtectedRoute from \"./components/ProtectedRoute\"\nimport Tours from \"./components/Tours\"\nimport Tour from './components/Tour';\n// import ProtectedRoute from './components/ProtectedRoute';\n// import Error from './components/Error'\nimport Bookings from './components/Booking';\n// // import axios from \"axios\"\\\nimport Books from \"./components/Books\"\n// axios.defaults.withCredentials=true\n// import { callTheTour } from './components/reduser/toureducer';\n// import {connect} from \"react-redux\"\n// import jwtDecode from 'jwt-decode'\nimport { callTheUser } from './components/reduser/userAction';\nimport {connect} from \"react-redux\"\n\n\nconst App = ({user,callUser})=>{\n  // const [userData,setUserData] = useState()\n  useEffect(() => {\n    let token  = localStorage.getItem('jwt')\n      if(token){\n        user.isLoggedIn = true\n        // const userInfo = jwtDecode(token)\n        // const call = callUser()\n        \n\n       \n      }\n     \n  \n \n    \n  }, [user]);\n  return (\n    \n    <>\n    <Header/>\n    <Switch>\n      <Route exact path=\"/\"><Tours/></Route>\n      <Route exact path='/tour/:id' ><Tour/></Route>\n      {/* <ProtectedRoute exact path=\"/me\" component={Me}/> */}\n      <Route exact path=\"/me\"><Me/></Route>  \n      <Route exact path=\"/login\"><Login /></Route>  \n      <Route exact path=\"/booking/:id\"><Bookings/></Route> \n      <Route exact path=\"/bookings\"><Books/></Route> \n      \n    </Switch>\n    \n\n       \n    </>\n  )\n}\n\n\n\nconst mapStateToProps = (state) =>{\n  return {\n      user:state.user\n  }\n}\nconst mapDispatchToProps = (dispatch) =>{\n  return {\n      callUser:()=>dispatch(callTheUser())\n  }\n} \n\n\nexport default connect(mapStateToProps,mapDispatchToProps)( App);\n\n\n\n// export default App;\n","import { applyMiddleware, createStore } from \"redux\";\r\n\r\nimport { combineReducers } from \"redux\";\r\nimport {touReducer} from \"./toureducer\";\r\nimport {useReducer} from \"./userAction\"\r\n// const thunkMiddleWare = require(\"redux-thunk\").default\r\nimport thunk from \"redux-thunk\"\r\nlet rootReducers = combineReducers({\r\n    tour:touReducer,\r\n    user:useReducer\r\n\r\n})\r\n\r\nconst store  = createStore(rootReducers,applyMiddleware(thunk))\r\n\r\n \r\nexport default store \r\n\r\n    ","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\nimport {BrowserRouter as Router} from \"react-router-dom\"\nimport {Provider} from \"react-redux\"\nimport store from \"./components/reduser/store\"\n// import {AppProvider} from \"./components/useGlobal\"\nReactDOM.render(\n    \n    <Provider store = {store}>\n    <Router>\n      \n    <App />\n    \n     </Router>\n     </Provider>\n  ,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}