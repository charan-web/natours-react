(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{51:function(e,s,a){},78:function(e,s,a){},96:function(e,s,a){"use strict";a.r(s);var c=a(1),t=a.n(c),n=a(23),r=a.n(n),i=(a(51),a(5)),o=a.n(i),l=a(13),d=a(6),j=a(7),u=a(4),m=a(8),b=a.n(m),h="GET_USER",x="GET_USER_SUCCESSFUL",p="GET_USER_FAILED",v={loading:!0,isLoggedIn:!1,data:{},error:"",cookie:document.cookie};function g(){return function(e){e({type:h}),b.a.get("https://infinite-spire-90765.herokuapp.com/user/me").then((function(s){var a=s.data;e(function(e){return{type:x,payload:e}}(a))})).catch((function(s){var a;e((a=s.msg,{type:p,payload:a}))}))}}b.a.defaults.headers.common.authorization="Bearer ".concat(localStorage.getItem("jwt")),b.a.defaults.headers.common["Access-Control-Allow-Origin"]="*";var O=function(){var e=document.querySelector(".alert");e&&e.parentElement.removeChild(e)},_=function(e,s){O();var a='<div class="alert alert--'.concat(e,'">').concat(s,"</div>");document.querySelector("body").insertAdjacentHTML("afterbegin",a),window.setTimeout(O,5e3)},f=a(0),N=Object(j.b)((function(e){return{user:e.user}}),(function(e){return{callUser:function(){return e(g())}}}))((function(e){var s,a,t,n,r,i,j=e.user,u=e.callUser;Object(c.useEffect)((function(){u()}),[u]);var m=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("jwt"),_("success","Logged Out"),window.location="/";case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("header",{className:"header",children:[Object(f.jsxs)("nav",{className:"nav nav--tours",children:[Object(f.jsx)(d.b,{to:"/",className:"nav__el",children:"All Tours"}),Object(f.jsxs)("form",{className:"nav__search",children:[Object(f.jsx)("button",{className:"nav__search-btn",children:Object(f.jsx)("svg",{children:Object(f.jsx)("use",{href:"./../img/icons.svg#icon-search"})})}),Object(f.jsx)("input",{type:"text",placeholder:"Search tours",className:"nav__search-input"})]})]}),Object(f.jsx)("div",{className:"header__logo",children:Object(f.jsx)("img",{src:"./../img/logo-white.png",alt:"Natours logo"})}),j.isLoggedIn?Object(f.jsxs)("nav",{className:"nav nav--user",children:[Object(f.jsx)(d.b,{className:"nav__el nav__el--logout",to:"",onClick:function(){return m()},children:"Log out"}),Object(f.jsxs)(d.b,{to:"/Me",className:"nav__el",children:[Object(f.jsx)("img",{className:"nav__user-img",src:"/img/users/".concat(null===j||void 0===j||null===(s=j.data)||void 0===s||null===(a=s.data)||void 0===a||null===(t=a.user)||void 0===t?void 0:t.photo),alt:"user"}),Object(f.jsx)("span",{children:null===j||void 0===j||null===(n=j.data)||void 0===n||null===(r=n.data)||void 0===r||null===(i=r.user)||void 0===i?void 0:i.name.split(" ")[0]})]})]}):Object(f.jsxs)("nav",{className:"nav nav--user",children:[Object(f.jsx)(d.b,{className:"nav__el",to:"/login",children:"Log in"}),Object(f.jsx)(d.b,{to:"/singup",className:"nav__el nav__el--cta ",children:"Sign up"})]})]})})),w=a(16),y=a(15),k=function(e){var s=e.value;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("main",{className:"main",children:Object(f.jsxs)("div",{className:"error",children:[Object(f.jsx)("div",{className:"error__title",children:Object(f.jsx)("h2",{className:"heading-secondary heading-secondary--error",children:"Something went Wrong"})}),Object(f.jsx)("div",{className:"error__msg",children:s})]})})})},L=Object(j.b)((function(e){return{user:e.user}}),(function(e){return{callUser:function(){return e(g())}}}))((function(e){var s=e.user,a=e.callUser,t=Object(c.useState)({name:"",email:"",photo:""}),n=Object(y.a)(t,2),r=n[0],i=n[1];Object(c.useEffect)((function(){a()}),[a]);var j,m,h,x,p,v,g,O,N,L=new FormData,S=Object(c.useRef)(""),C=Object(c.useState)({currentpassword:"",password:"",passwordConfirm:""}),E=Object(y.a)(C,2),F=E[0],T=E[1],I=function(e,s){var a=e.target.name,c=e.target.value;"password"===s?T(Object(u.a)(Object(u.a)({},F),{},Object(w.a)({},a,c))):("photo"===a&&(c=S.current.files[0]),i(Object(u.a)(Object(u.a)({},r),{},Object(w.a)({},a,c))))},U=function(){var e=Object(l.a)(o.a.mark((function e(s,a,c){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.photo=r.photo,L.email=r.email,L.name=r.name,s.preventDefault(),t="password"===c?"https://infinite-spire-90765.herokuapp.com/user/updatepassword":"https://infinite-spire-90765.herokuapp.com/user/updateme",e.prev=5,e.next=8,b()({method:"patch",url:t,data:"password"===c?{currentpassword:F.currentpassword,password:F.password,passwordConfirm:F.passwordConfirm}:{name:L.name,email:L.email,photo:L.photo}});case 8:"success"===e.sent.status&&(_("success","updated successfully"),window.location="/me"),e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return",Object(f.jsx)(k,{value:"Please try agian later"}));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(s,a,c){return e.apply(this,arguments)}}();return s.isLoggedIn?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("main",{className:"main",children:Object(f.jsxs)("div",{className:"user-view",children:[Object(f.jsxs)("nav",{className:"user-view__menu",children:[Object(f.jsxs)("ul",{className:"side-nav",children:[Object(f.jsx)("li",{className:"side-nav--active",children:Object(f.jsxs)("a",{href:"/img/icons.svg#icon-settings",children:[Object(f.jsx)("svg",{href:"/img/icons.svg#icon-settings"}),"| Settings"]})}),Object(f.jsx)("li",{className:"side-nav--active",children:Object(f.jsx)(d.b,{to:"/bookings",children:"svg use(xlink:href='img/icons.svg#icon-briefcase') | My Bookings"})}),Object(f.jsx)("li",{className:"side-nav--active",children:Object(f.jsx)("a",{href:"/",children:"svg use(xlink:href='img/icons.svg#icon-star') | My Reviews"})}),Object(f.jsx)("li",{className:"side-nav--active",children:Object(f.jsx)("a",{href:"/",children:"svg use(xlink:href='/img/icons.svg#icon-credit-card') | Billing"})})]}),"admin"==="".concat(null===s||void 0===s||null===(j=s.data)||void 0===j||null===(m=j.data)||void 0===m||null===(h=m.user)||void 0===h?void 0:h.role)?Object(f.jsxs)("div",{className:"admin-nav",children:[Object(f.jsx)("h5",{className:"admin-nav__heading",children:"Admin"}),Object(f.jsxs)("ul",{className:"side-nav",children:[Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"/",children:"svg use(xlink:href='img/icons.svg#icon-map') | Manage tours"})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"/",children:"svg use(xlink:href='img/icons.svg#icon-users') | Manage Users"})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"/",children:"svg use(xlink:href='img/icons.svg#icon-star') | Manage Reviews"})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"/",children:"svg use(xlink:href='img/icons.svg#icon-briefcase') | Manage Tours"})})]})]}):null]}),Object(f.jsx)("div",{className:"user-view__content",children:Object(f.jsxs)("div",{className:"user-view__form-container",children:[Object(f.jsxs)("h2",{className:"heading-secondary ma-bt-md",children:["Your Accoount Settings ","Mr.".concat(null===s||void 0===s||null===(x=s.data)||void 0===x||null===(p=x.data)||void 0===p||null===(v=p.user)||void 0===v?void 0:v.name.split(" "))]}),Object(f.jsxs)("form",{className:"form form-user-data",children:[Object(f.jsxs)("div",{className:"form__group",children:[Object(f.jsx)("label",{htmlFor:"name",className:"form__label",children:"Name"}),Object(f.jsx)("input",{value:r.name,onChange:function(e){return I(e)},className:"form__input",required:!0,type:"text",id:"name",name:"name"})]}),Object(f.jsxs)("div",{className:"form__group ma-bt-md",children:[Object(f.jsx)("label",{htmlFor:"email",className:"form__label",children:"Email"}),Object(f.jsx)("input",{className:"form__input",value:r.email,onChange:function(e){return I(e)},name:"email",id:"email",type:"email",required:!0})]}),Object(f.jsxs)("div",{className:"form__group form__photo-upload",children:[Object(f.jsx)("img",{className:"form__user-photo",src:"/img/users/".concat(null===s||void 0===s||null===(g=s.data)||void 0===g||null===(O=g.data)||void 0===O||null===(N=O.user)||void 0===N?void 0:N.photo),alt:"user"}),Object(f.jsx)("input",{onChange:function(e){return I(e)},type:"file",name:"photo",id:"photo",accept:"image/*",className:"form__upload",ref:S}),Object(f.jsx)("label",{onChange:function(e){return I(e)},htmlFor:"photo",children:"Choose Photo"})]}),Object(f.jsx)("div",{className:"form__group right",children:Object(f.jsx)("button",{className:"btn btn--small btn--green",onClick:function(e){return U(e,L,"user")},children:"Save settings"})})]}),Object(f.jsx)("div",{className:"line"}),Object(f.jsxs)("div",{className:"user-view__form-container",children:[Object(f.jsx)("h2",{className:"heading-secondary ma-bt-md",children:"password Change"}),Object(f.jsxs)("form",{action:"/",className:"form form-user-settings",children:[Object(f.jsxs)("div",{className:"form__group",children:[Object(f.jsx)("label",{htmlFor:"password",className:"form__label",children:"Current Password"}),Object(f.jsx)("input",{onChange:function(e){return I(e,"password")},className:"form__input",id:"password-current",type:"password",required:!0,minLength:"8",name:"currentpassword"})]}),Object(f.jsxs)("div",{className:"form__group",children:[Object(f.jsx)("label",{htmlFor:"password",id:"password",className:"form__label",children:"New Password"}),Object(f.jsx)("input",{onChange:function(e){return I(e,"password")},className:"form__input",id:"password",type:"password",required:!0,minLength:"8",name:"password"})]}),Object(f.jsxs)("div",{className:"form__group ma-bt-lg",children:[Object(f.jsx)("label",{htmlFor:"password-confirm",className:"form__label",children:"Confirm Password"}),Object(f.jsx)("input",{onChange:function(e){return I(e,"password")},type:"password",id:"password-confirm",className:"form__input",minLength:"8",required:!0,name:"passwordConfirm"})]}),Object(f.jsx)("div",{className:"form__group right",children:Object(f.jsx)("button",{className:"btn btn--small btn--green",onClick:function(e){return U(e,{password:F.password,currentpassword:F.currentpassword,passwordConfirm:F.passwordConfirm},"password")},children:"Save Password"})})]})]})]})})]})})}):"Loading..."})),S=(a(77),a(78),a(3)),C=Object(j.b)((function(e){return{user:e.user}}),null)((function(e){var s=e.user,a=Object(c.useState)({email:"",password:""}),t=Object(y.a)(a,2),n=t[0],r=t[1],i=function(e){var s=e.target.id,a=e.target.value;r(Object(u.a)(Object(u.a)({},n),{},Object(w.a)({},s,a)))},d=function(){var e=Object(l.a)(o.a.mark((function e(a){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,b()({method:"post",url:"https://infinite-spire-90765.herokuapp.com/user/login/",data:{email:n.email,password:n.password}});case 4:c=e.sent,localStorage.setItem("jwt",c.data.token),200===c.status&&(_("success","Logged In"),s.isLoggedIn=!0,s.props?window.location=s.props.location.pathname:window.location="/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(s){return e.apply(this,arguments)}}();return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("main",{className:"main",children:Object(f.jsxs)("div",{className:"login-form",children:[Object(f.jsx)("h2",{className:"heading-secondary ma-bt-lg",children:"Login to your Account"}),Object(f.jsxs)("form",{className:"form--login",children:[Object(f.jsxs)("div",{className:"form__group",children:[Object(f.jsx)("label",{className:"form__label",htmlFor:"email",children:"Email Address"}),Object(f.jsx)("input",{onChange:function(e){return i(e)},id:"email",className:"form__input",type:"email",placeholder:"you@gmail.com"})]}),Object(f.jsxs)("div",{className:"form__group ma-bt-md",children:[Object(f.jsx)("label",{className:"form__label",htmlFor:"password",children:"Password"}),Object(f.jsx)("input",{onChange:function(e){return i(e)},id:"password",className:"form__input",type:"password",placeholder:"your password",minLength:"8"})]}),Object(f.jsx)("div",{className:"form__group",children:Object(f.jsx)("button",{onClick:function(e){return d(e)},className:"btn btn--green",children:"Log In"})})]})]})})})})),E="GET_TOUR",F="GET_TOUR_SUCCESSFUL",T="GET_TOUR_FAILED",I={loading:!0,data:[],error:""};var U=function(){return function(e){e({type:E}),b.a.get("https://infinite-spire-90765.herokuapp.com/tour/").then((function(s){var a=s.data.data.tours;e(function(e){return{type:F,payload:e}}(a))})).catch((function(s){var a;e((a=s.msg,{type:T,payload:a}))}))}},M=Object(j.b)((function(e){return{tour:e.tour,user:e.user}}),(function(e){return{call:function(){return e(U())}}}))((function(e){var s,a=e.call,t=e.tour;e.user;return Object(c.useEffect)((function(){a()}),[a]),Object(f.jsx)("main",{className:"main",children:t.loading?"loading":Object(f.jsx)("div",{className:"card-container",children:null===(s=t.data)||void 0===s?void 0:s.map((function(e){return Object(f.jsxs)("div",{className:"card",children:[Object(f.jsxs)("div",{className:"card__header",children:[Object(f.jsxs)("div",{className:"card__picture",children:[Object(f.jsx)("div",{className:"card__picture-overlay",children:"\xa0"}),Object(f.jsx)("img",{src:"/img/tours/".concat(e.imageCover),alt:e.name,className:"card__picture-img"})]}),Object(f.jsx)("h3",{className:"heading-tertirary",children:Object(f.jsx)("span",{children:e.name})})]}),Object(f.jsxs)("div",{className:"card__details",children:[Object(f.jsx)("h4",{className:"card__sub-heading",children:e.difficulty+" "+e.duration+" day tour"}),Object(f.jsx)("p",{className:"card__text",children:e.summary}),Object(f.jsxs)("div",{className:"card__data",children:[Object(f.jsx)("svg",{className:"card__icon",children:Object(f.jsx)("use",{href:"/img/icons.svg/icon-map-pin"})}),Object(f.jsx)("span",{children:e.startLocation.description})]}),Object(f.jsxs)("div",{className:"card__data",children:[Object(f.jsx)("svg",{className:"card__icon",children:Object(f.jsx)("use",{href:"/img/icons.svg/icon-calendar"})}),Object(f.jsx)("span",{children:new Date(e.startDates[0]).toLocaleString("en-us",{month:"long",year:"numeric"})})]}),Object(f.jsxs)("div",{className:"card__data",children:[Object(f.jsx)("svg",{className:"card__icon",children:Object(f.jsx)("use",{href:"/img/icons.svg/icon-flag"})}),Object(f.jsxs)("span",{children:[" ",e.locations.length+" stops"]})]}),Object(f.jsxs)("div",{className:"card__data",children:[Object(f.jsx)("svg",{className:"card__icon",children:Object(f.jsx)("use",{href:"/img/icons.svg/icon-user"})}),Object(f.jsx)("span",{children:e.maxGroupSize+" people"})]})]}),Object(f.jsxs)("div",{className:"card__footer",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"card__footer-value",children:"$"+e.price}),Object(f.jsx)("span",{className:"card__footer-text",children:" per person"})]}),Object(f.jsxs)("p",{className:"card__ratings",children:[Object(f.jsx)("span",{className:"card__footer-value",children:e.ratingAverage}),Object(f.jsx)("span",{className:"card__footer-text",children:"rating "+e.ratingsQuantity})]}),Object(f.jsx)(d.b,{to:"/tour/".concat(e.name),className:"btn btn--green btn--small",children:"Details"})]})]},e.id)}))})})})),A=a(18),G=a.n(A),P=function(e){var s=e.tour.locations,a=Object(c.useRef)(null);return G.a.accessToken="pk.eyJ1IjoiZnJvbWluZGlhMSIsImEiOiJja29zZHJwZWkwMGl6MnFsc3JtdGg4ZGZkIn0.zHRisllWeuVkVW2y2FCBYQ",Object(c.useEffect)((function(){var e=new G.a.Map({container:a.current,style:"mapbox://styles/fromindia1/ckoso76ho3fdo17kcckcc6r7e",scrollZoom:!1}),c=new G.a.LngLatBounds;s.forEach((function(s){var a=document.createElement("div");a.className="marker",new G.a.Marker({element:a,anchor:"bottom"}).setLngLat(s.coordinates).addTo(e),c.extend(s.coordinates),new G.a.Popup({offset:30}).setLngLat(s.coordinates).setHTML("<p>Day ".concat(s.day," ").concat(s.description,"</p>")).addTo(e)})),e.fitBounds(c,{padding:{top:200,left:150,bottom:150,right:100}})}),[s]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("section",{className:"section-map",children:Object(f.jsx)("div",{ref:a,id:"map"})})})},D=t.a.memo((function(e){var s,a=e.user,t=e.callUser,n=Object(c.useState)(!0),r=Object(y.a)(n,2),i=r[0],j=r[1],u=Object(c.useState)({}),m=Object(y.a)(u,2),b=m[0],h=m[1],x=Object(S.f)(),p="https://infinite-spire-90765.herokuapp.com/tour/".concat(x.id),v=Object(c.useCallback)(Object(l.a)(o.a.mark((function e(){var s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p);case 3:return s=e.sent,e.next=6,s.json();case 6:a=e.sent,h(a),j(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[p]);Object(c.useEffect)((function(){t(),v()}),[p,v,t]);var g=null===b||void 0===b||null===(s=b.data)||void 0===s?void 0:s.tour;return"error"===b.status?Object(f.jsx)(k,{value:"There is No Tour with that Name"}):Object(f.jsx)(f.Fragment,{children:i?"loading":Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("section",{className:"section-header",children:Object(f.jsxs)("div",{className:"heading-box",children:[Object(f.jsx)("h1",{className:"heading-primary",children:Object(f.jsxs)("span",{children:[g.name,Object(f.jsx)("br",{}),"Tour"]})}),Object(f.jsxs)("div",{className:"heading-box__group",children:[Object(f.jsxs)("div",{className:"heading-box__detail",children:[Object(f.jsx)("svg",{className:"heading-box__icon",children:Object(f.jsx)("use",{href:"/img/icons.svg#icon-clock"})}),Object(f.jsxs)("span",{className:"heading-box__text",children:[g.duration," days"]})]}),Object(f.jsxs)("div",{className:"heading-box__detail",children:[Object(f.jsx)("svg",{className:"heading-box__icon",children:Object(f.jsx)("use",{href:"/img/icons.svg#icon-map-pin"})}),Object(f.jsx)("span",{className:"heading-box__text",children:g.startLocation.description})]})]})]})}),Object(f.jsxs)("section",{className:"section-description",children:[Object(f.jsx)("div",{className:"overview-box",children:Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"overview-box__group",children:[Object(f.jsx)("h2",{className:"heading-secondary ma-bt-lg",children:"Quick facts"}),Object(f.jsxs)("div",{className:"overview-box__detail",children:[Object(f.jsx)("svg",{className:"overview-box__icon",children:Object(f.jsx)("use",{href:"/img/icons.svg#icon-calendar"})}),Object(f.jsx)("span",{className:"overview-box__label",children:"Next date"}),Object(f.jsx)("span",{className:"overview-box__text",children:g.startDates[0]})]}),Object(f.jsxs)("div",{className:"overview-box__detail",children:[Object(f.jsx)("svg",{className:"overview-box__icon",children:Object(f.jsx)("use",{href:"/img/icons.svg#icon-trending-up"})}),Object(f.jsx)("span",{className:"overview-box__label",children:"Difficulty"}),Object(f.jsx)("span",{className:"overview-box__text",children:g.difficulty})]}),Object(f.jsxs)("div",{className:"overview-box__detail",children:[Object(f.jsx)("svg",{className:"overview-box__icon",children:Object(f.jsx)("use",{href:"/img/icons.svg#icon-user"})}),Object(f.jsx)("span",{className:"overview-box__label",children:"Participants"}),Object(f.jsxs)("span",{className:"overview-box__text",children:[g.maxGroupSize," people"]})]}),Object(f.jsxs)("div",{className:"overview-box__detail",children:[Object(f.jsx)("svg",{className:"overview-box__icon",children:Object(f.jsx)("use",{href:"/img/icons.svg#icon-star"})}),Object(f.jsx)("span",{className:"overview-box__label",children:"Rating"}),Object(f.jsxs)("span",{className:"overview-box__text",children:[g.ratingAverage," / ",g.ratingsQuantity]})]})]}),Object(f.jsxs)("div",{className:"overview-box__group",children:[Object(f.jsx)("h2",{className:"heading-secondary ma-bt-lg",children:"Your tour guides"}),g.guides.map((function(e){return Object(f.jsxs)("div",{className:"overview-box__detail",children:[Object(f.jsx)("img",{src:"/img/users/".concat(e.photo),alt:"Lead guide",className:"overview-box__img"}),Object(f.jsx)("span",{className:"overview-box__label",children:e.role}),Object(f.jsx)("span",{className:"overview-box__text",children:e.name})]},e.name)}))]})]})}),Object(f.jsxs)("div",{className:"description-box",children:[Object(f.jsxs)("h2",{className:"heading-secondary ma-bt-lg",children:["About the ",g.name," Tour"]}),Object(f.jsx)("p",{className:"description__text",children:g.description})]})]}),Object(f.jsx)("section",{className:"section-pictures",children:g.images.map((function(e){return Object(f.jsx)("div",{className:"picture-box",children:Object(f.jsx)("img",{className:"picture-box__img picture-box__img--1",src:"/img/tours/".concat(e),alt:"The Park Camper Tour 1"})},e)}))}),Object(f.jsx)(P,{tour:g}),Object(f.jsx)("section",{className:"section-reviews",children:Object(f.jsx)("div",{className:"reviews",children:g.reviews.map((function(e){return Object(f.jsxs)("div",{className:"reviews__card",children:[Object(f.jsxs)("div",{className:"reviews__avatar",children:[Object(f.jsx)("img",{src:"/img/users/".concat(e.user.photo),alt:"Jim Brown",className:"reviews__avatar-img"}),Object(f.jsx)("h6",{className:"reviews__user",children:e.user.name})]}),Object(f.jsx)("p",{className:"reviews__text",children:e.review}),Object(f.jsx)("div",{className:"reviews__rating",children:[1,2,3,4,5].map((function(s){return Object(f.jsx)("svg",{className:"reviews__star reviews__star--".concat(e.rating>=s?"active":"inactive"),children:Object(f.jsx)("use",{href:"/img/icons.svg#icon-star"})},s)}))})]},e.id)}))})}),Object(f.jsx)("section",{className:"section-cta",children:Object(f.jsxs)("div",{className:"cta",children:[Object(f.jsx)("div",{className:"cta__img cta__img--logo",children:Object(f.jsx)("img",{src:"/img/logo-white.png",alt:"Natours logo",className:""})}),Object(f.jsx)("img",{src:"/img/tours/".concat(g.images[2]),alt:"",className:"cta__img cta__img--1"}),Object(f.jsx)("img",{src:"/img/tours/".concat(g.images[0]),alt:"",className:"cta__img cta__img--2"}),Object(f.jsxs)("div",{className:"cta__content",children:[Object(f.jsx)("h2",{className:"heading-secondary",children:"What are you waiting for?"}),Object(f.jsxs)("p",{className:"cta__text",children:[g.duration," days. 1 adventure. Infinite memories. Make it yours today!"]}),a.isLoggedIn?Object(f.jsx)(d.b,{to:"/booking/".concat(g.id),className:"btn btn--green span-all-rows",children:"Book tour now!"}):Object(f.jsx)(d.b,{to:"/login",clasName:"btn btn--green span-all-rows",children:"Login to Book Tour"})]})]})})]})})})),R=Object(j.b)((function(e){return{tour:e.tour,user:e.user}}),(function(e){return{callUser:function(){return e(g())}}}))(D),B=function(){var e=Object(S.f)(),s="https://infinite-spire-90765.herokuapp.com//booking/checkout-session/".concat(e.id);Object(c.useEffect)((function(){!function(){t.apply(this,arguments)}()}),[]);var a=window.Stripe("pk_test_51IwJA8SImVPQaPp7KU8HTgSvoXGZAMvkF02zfkmVRg52y2LSDqmbwrEJplGcrCdyBmOLe0LatV9mPUo2SGrl2D5c00voJ4MnPh");function t(){return(t=Object(l.a)(o.a.mark((function e(){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b()({method:"get",url:s,withCredentials:!0});case 3:return c=e.sent,e.next=6,a.redirectToCheckout({sessionId:c.data.session.id});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),_("error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(f.jsx)(f.Fragment,{children:"Payment page is Loading..."})},J=function(){var e=Object(c.useState)([]),s=Object(y.a)(e,2),a=s[0],t=s[1];function n(){return(n=Object(l.a)(o.a.mark((function e(){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b()({method:"get",url:"https://infinite-spire-90765.herokuapp.com/webhook-checkout"});case 2:s=e.sent,t(s);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){n.apply(this,arguments)}()}),[]),Object(f.jsx)(f.Fragment,{children:0===a.length?Object(f.jsx)("h1",{children:"No tours"}):Object(f.jsxs)(f.Fragment,{children:[a.map((function(e){return Object(f.jsx)(M,{})})),"  "]})})},q=Object(j.b)((function(e){return{user:e.user}}),(function(e){return{callUser:function(){return e(g())}}}))((function(e){var s=e.user;e.callUser;return Object(c.useEffect)((function(){localStorage.getItem("jwt")&&(s.isLoggedIn=!0)}),[s]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(N,{}),Object(f.jsxs)(S.c,{children:[Object(f.jsx)(S.a,{exact:!0,path:"/",children:Object(f.jsx)(M,{})}),Object(f.jsx)(S.a,{exact:!0,path:"/tour/:id",children:Object(f.jsx)(R,{})}),Object(f.jsx)(S.a,{exact:!0,path:"/me",children:Object(f.jsx)(L,{})}),Object(f.jsx)(S.a,{exact:!0,path:"/login",children:Object(f.jsx)(C,{})}),Object(f.jsx)(S.a,{exact:!0,path:"/booking/:id",children:Object(f.jsx)(B,{})}),Object(f.jsx)(S.a,{exact:!0,path:"/bookings",children:Object(f.jsx)(J,{})})]})]})})),Z=a(20),z=a(46),W=Object(Z.b)({tour:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case E:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case F:return Object(u.a)(Object(u.a)({},e),{},{data:s.payload,loading:!1});case T:return{loading:!1,data:[],error:s.payload};default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case h:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case x:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,isLoggedIn:!0,data:s.payload});case p:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,data:[],error:s.payload});default:return e}}}),H=Object(Z.c)(W,Object(Z.a)(z.a));r.a.render(Object(f.jsx)(j.a,{store:H,children:Object(f.jsx)(d.a,{children:Object(f.jsx)(q,{})})}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.5e69522b.chunk.js.map